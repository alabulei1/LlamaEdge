$ wasmedge --dir .:. --nn-preload default:GGML:AUTO:Llama-2-13b-chat-hf-Q5_K_M.gguf llama-api-server.wasm \
  --prompt-template llama-2-chat \
  --ctx-size 4096 \
  --qdrant-url http://127.0.0.1:6333 \
  --qdrant-collection-name "paris" \
  --qdrant-limit 3 --log-prompts
[2024-03-05 11:06:36.075] [error] instantiation failed: module name conflict, Code: 0x60
[2024-03-05 11:06:36.076] [error]     At AST node: module
[INFO] Socket address: 0.0.0.0:8080
[INFO] Model name: default
[INFO] Model alias: default
[INFO] Prompt context size: 4096
[INFO] Number of tokens to predict: 1024
[INFO] Number of layers to run on the GPU: 100
[INFO] Batch size for prompt processing: 512
[INFO] Temperature for sampling: 1
[INFO] Top-p sampling (1.0 = disabled): 1
[INFO] Penalize repeat sequence of tokens: 1.1
[INFO] Presence penalty (0.0 = disabled): 0
[INFO] Frequency penalty (0.0 = disabled): 0
[INFO] Prompt template: Llama2Chat
[INFO] Log prompts: true
[INFO] Qdrant server address: http://127.0.0.1:6333
[INFO] Qdrant collection name: paris
[INFO] Max number of retrieved result: 3
[INFO] Log statistics: false
[INFO] Log all information: false
[INFO] Starting server ...
[INFO] Plugin version: b2230 (commit 89febfed)
[INFO] Listening on http://0.0.0.0:8080


[+] Compute embeddings for document chunks and persist them in the specified Qdrant server

[DEBUG](embedding) embedding option: expected=true, actual=true

    * Creating a collection ...
      * Collection name: paris
      * Dimension: 5120
    * Creating points to save embeddings ...
    * Upserting points ...

[+] Query a user input and return a chat-completion response with the answer from the model

[DEBUG](embedding) embedding option: expected=true, actual=true

    * Point 0: score: 0.24712327
      Source: "For centuries Paris has been one of the world’s most important and attractive cities. It is appreciated for the opportunities it offers for business and commerce, for study, for culture, and for entertainment; its gastronomy, haute couture, painting, literature, and intellectual community especially enjoy an enviable reputation. Its sobriquet “the City of Light” (“la Ville Lumière”), earned during the Enlightenment, remains appropriate, for Paris has retained its importance as a centre for education and intellectual pursuits."
    * Point 1: score: 0.1821801
      Source: "Paris, city and capital of France, situated in the north-central part of the country. People were living on the site of the present-day city, located along the Seine River some 233 miles (375 km) upstream from the river’s mouth on the English Channel (La Manche), by about 7600 BCE. The modern city has spread from the island (the Île de la Cité) and far beyond both banks of the Seine."
    * Point 2: score: 0.17039531
      Source: "Under Hugh Capet (ruled 987–996) and the Capetian dynasty the preeminence of Paris was firmly established, and Paris became the political and cultural hub as modern France took shape. France has long been a highly centralized country, and Paris has come to be identified with a powerful central state, drawing to itself much of the talent and vitality of the provinces."

[+] Chat completion with the context


****************************************** [LOG: PROMPT] ******************************************


<s>[INST] <<SYS>>
Use the following pieces of context to answer the user's question.
If you don't know the answer, just say that you don't know, don't try to make up an answer.
----------------
"For centuries Paris has been one of the world’s most important and attractive cities. It is appreciated for the opportunities it offers for business and commerce, for study, for culture, and for entertainment; its gastronomy, haute couture, painting, literature, and intellectual community especially enjoy an enviable reputation. Its sobriquet “the City of Light” (“la Ville Lumière”), earned during the Enlightenment, remains appropriate, for Paris has retained its importance as a centre for education and intellectual pursuits."

"Paris, city and capital of France, situated in the north-central part of the country. People were living on the site of the present-day city, located along the Seine River some 233 miles (375 km) upstream from the river’s mouth on the English Channel (La Manche), by about 7600 BCE. The modern city has spread from the island (the Île de la Cité) and far beyond both banks of the Seine."

"Under Hugh Capet (ruled 987–996) and the Capetian dynasty the preeminence of Paris was firmly established, and Paris became the political and cultural hub as modern France took shape. France has long been a highly centralized country, and Paris has come to be identified with a powerful central state, drawing to itself much of the talent and vitality of the provinces." <</SYS>>

What is the location of Paris, France on the Seine River? [/INST]


****************************************************************************************************


[DEBUG](chat) embedding option: expected=false, actual=false


[DEBUG] real_output_size=167, max_buffer_size=245888


[DEBUG] raw output:
  Based on the provided context, Paris, France is located along the Seine River, specifically on the island of Île de la Cité and far beyond both banks of the Seine.



************************************** [LOG: PROMPT (Tokens)] **************************************


prompt tokens: 389, completion_tokens: 38


****************************************************************************************************

